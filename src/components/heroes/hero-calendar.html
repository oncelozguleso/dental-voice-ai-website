<!-- UnicornStudio Background (Lazy Loaded) -->
<div class="aura-background-component top-0 w-full h-[1350px] sm:h-[1250px] lg:h-[1350px] -z-10 absolute" data-unicorn-studio="x6cbPWi9roeeiZ8cuBu3"></div>

        <!-- Hero -->
        <section id="calendar-section" class="relative mb-8">
    
          <div class="max-w-7xl lg:px-8 mr-auto ml-auto px-1 sm:px-4 md:px-6">
            <div class="mx-auto max-w-4xl text-center pt-10 sm:pt-14 px-4 sm:px-0">
              <!-- Calendar Embed Container -->
              <div class="relative z-10 backdrop-blur-xl rounded-3xl border border-white/20 shadow-2xl mx-auto max-w-5xl overflow-hidden" style="background: rgba(64, 64, 64, 0.85);">
                <div class="p-8 pb-4">
                  <!-- Countdown Timer -->
                  <div class="text-center mb-4">
                    <div class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-red-500/20 border border-red-400/30 text-red-200 text-sm animate-pulse">
                      <span class="h-2 w-2 rounded-full bg-red-400 animate-ping"></span>
                      <span class="font-medium">Limited Time:</span>
                      <span id="calendar-countdown-timer" class="font-mono font-bold">--:--:--</span>
                      <span class="text-xs">left</span>
                    </div>
                  </div>
                  
                  <h2 class="text-2xl sm:text-3xl font-semibold text-white mb-2">Start Your <span data-geo-trial-price>A$1</span> Trial - 10 Days</h2>
                  <p class="text-white/70 text-sm sm:text-base">Book a call to activate your Voice AI trial and see results in 10 days</p>
      </div>
    
                <!-- Calendar iframe with loading optimization -->
                <div class="overflow-hidden relative">
                  <!-- Loading Skeleton -->
                  <div id="calendar-loading-skeleton" class="absolute inset-0 bg-gray-50 rounded-lg">
                    <div class="animate-pulse p-6">
                      <!-- Header skeleton -->
                      <div class="h-8 bg-gray-200 rounded-lg mb-6"></div>
                      
                      <!-- Calendar grid skeleton -->
                      <div class="grid grid-cols-7 gap-2 mb-6">
                        <div class="h-6 bg-gray-200 rounded"></div>
                        <div class="h-6 bg-gray-200 rounded"></div>
                        <div class="h-6 bg-gray-200 rounded"></div>
                        <div class="h-6 bg-gray-200 rounded"></div>
                        <div class="h-6 bg-gray-200 rounded"></div>
                        <div class="h-6 bg-gray-200 rounded"></div>
                        <div class="h-6 bg-gray-200 rounded"></div>
                      </div>
                      
                      <!-- Date grid skeleton -->
                      <div class="grid grid-cols-7 gap-2 mb-6">
                        <div class="h-10 bg-gray-200 rounded"></div>
                        <div class="h-10 bg-gray-200 rounded"></div>
                        <div class="h-10 bg-gray-200 rounded"></div>
                        <div class="h-10 bg-gray-200 rounded"></div>
                        <div class="h-10 bg-gray-200 rounded"></div>
                        <div class="h-10 bg-gray-200 rounded"></div>
                        <div class="h-10 bg-gray-200 rounded"></div>
                        <div class="h-10 bg-gray-200 rounded"></div>
                        <div class="h-10 bg-gray-200 rounded"></div>
                        <div class="h-10 bg-gray-200 rounded"></div>
                        <div class="h-10 bg-gray-200 rounded"></div>
                        <div class="h-10 bg-gray-200 rounded"></div>
                        <div class="h-10 bg-gray-200 rounded"></div>
                        <div class="h-10 bg-gray-200 rounded"></div>
                      </div>
                      
                      <!-- Time slots skeleton -->
                      <div class="space-y-3">
                        <div class="h-12 bg-gray-200 rounded-lg"></div>
                        <div class="h-12 bg-gray-200 rounded-lg"></div>
                        <div class="h-12 bg-gray-200 rounded-lg"></div>
                        <div class="h-12 bg-gray-200 rounded-lg"></div>
                      </div>
                    </div>
                    
                    <!-- Loading spinner overlay -->
                    <div class="absolute inset-0 flex items-center justify-center bg-white/80 backdrop-blur-sm">
                      <div class="text-center">
                        <div class="inline-flex items-center gap-3 px-6 py-3 bg-white rounded-full shadow-lg border border-gray-200">
                          <div class="animate-spin h-5 w-5 border-2 border-blue-600 border-t-transparent rounded-full"></div>
                          <span class="text-gray-700 font-medium">Loading your booking calendar...</span>
                        </div>
                        <p class="text-gray-500 text-sm mt-3">This may take a few moments</p>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Actual iframe (lazy loaded) -->
                  <iframe 
                    data-src="https://api.leadconnectorhq.com/widget/booking/PcUyCv42lP91GzQuqkgU" 
                    style="width: 100%; height: 800px; border: none; overflow: hidden; display: block; margin: 0; padding: 0; opacity: 0; transition: opacity 0.3s ease-in-out;" 
                    scrolling="no" 
                    id="PcUyCv42lP91GzQuqkgU_1757868011597"
                    loading="lazy"
                    importance="high">
                  </iframe>
                </div>
      </div>
    
              <script src="https://link.msgsndr.com/js/form_embed.js" type="text/javascript"></script>
              
              <!-- Sticky Contacts: Pre-fill Calendar -->
              <script>
                // Lazy Loading and Performance Optimization
                document.addEventListener('DOMContentLoaded', function() {
                  
                  // Intersection Observer for lazy loading
                  const iframe = document.getElementById('PcUyCv42lP91GzQuqkgU_1757868011597');
                  const skeleton = document.getElementById('calendar-loading-skeleton');
                  let isLoaded = false;
                  
                  // Function to actually load the iframe
                  function loadIframe() {
                    if (isLoaded || !iframe) return;
                    
                    console.log('Starting calendar lazy load...');
                    isLoaded = true;
                    
                    const dataSrc = iframe.getAttribute('data-src');
                    if (dataSrc) {
                      iframe.src = dataSrc;
                      iframe.removeAttribute('data-src');
                    }
                  }
                  
                  // Create Intersection Observer
                  if ('IntersectionObserver' in window) {
                    const observer = new IntersectionObserver((entries) => {
                      entries.forEach(entry => {
                        if (entry.isIntersecting) {
                          loadIframe();
                          observer.unobserve(entry.target);
                        }
                      });
                    }, {
                      rootMargin: '50px' // Start loading 50px before the element is visible
                    });
                    
                    // Observe the calendar container
                    const calendarContainer = iframe.parentElement;
                    if (calendarContainer) {
                      observer.observe(calendarContainer);
                    }
                  } else {
                    // Fallback for browsers without Intersection Observer
                    loadIframe();
                  }
                  
                  // Alternative: Load on user interaction (scroll, click, etc.)
                  let userInteracted = false;
                  function handleUserInteraction() {
                    if (!userInteracted) {
                      userInteracted = true;
                      setTimeout(loadIframe, 100); // Small delay to prioritize user action
                    }
                  }
                  
                  // Listen for user interactions
                  ['scroll', 'touchstart', 'click', 'keydown'].forEach(event => {
                    document.addEventListener(event, handleUserInteraction, { once: true, passive: true });
                  });
                  
                  // Fallback: Load after 3 seconds if no interaction
                  setTimeout(() => {
                    if (!userInteracted && !isLoaded) {
                      console.log('Loading calendar after timeout (no user interaction)');
                      loadIframe();
                    }
                  }, 3000);
                  
                  // Function to get stored contact data
                  function getStickyContact() {
                    try {
                      const stored = localStorage.getItem('stickyContactData');
                      if (stored) {
                        const data = JSON.parse(stored);
                        
                        // Check if data is expired (older than 24 hours)
                        const now = new Date().getTime();
                        const storedTime = new Date(data.timestamp).getTime();
                        const hoursDiff = (now - storedTime) / (1000 * 60 * 60);
                        
                        if (hoursDiff > 24) {
                          console.log('Sticky contact data expired, removing...');
                          localStorage.removeItem('stickyContactData');
                          return null;
                        }
                        
                        console.log('Retrieved sticky contact data:', data);
                        return data;
                      }
                    } catch (e) {
                      console.error('Error retrieving sticky contact data:', e);
                    }
                    return null;
                  }
                  
                  // Function to clear stored contact data
                  function clearStickyContact() {
                    localStorage.removeItem('stickyContactData');
                    console.log('Sticky contact data cleared');
                  }
                  
                  // Pre-fill calendar iframe with contact data
                  function prefillCalendar() {
                    const contactData = getStickyContact();
                    
                    if (contactData) {
                      const iframe = document.getElementById('PcUyCv42lP91GzQuqkgU_1757868011597');
                      
                      if (iframe) {
                        // Build URL parameters for pre-filling
                        const params = new URLSearchParams();
                        
                        // Add contact data as URL parameters
                        if (contactData.full_name) params.set('full_name', contactData.full_name);
                        if (contactData.first_name) params.set('first_name', contactData.first_name);
                        if (contactData.last_name) params.set('last_name', contactData.last_name);
                        if (contactData.email) params.set('email', contactData.email);
                        if (contactData.phone) params.set('phone', contactData.phone);
                        
                        // Also try common variations
                        if (contactData.full_name) {
                          params.set('name', contactData.full_name);
                          params.set('contact_name', contactData.full_name);
                        }
                        if (contactData.first_name) {
                          params.set('firstName', contactData.first_name);
                          params.set('fname', contactData.first_name);
                        }
                        if (contactData.last_name) {
                          params.set('lastName', contactData.last_name);
                          params.set('lname', contactData.last_name);
                        }
                        if (contactData.email) {
                          params.set('email_address', contactData.email);
                          params.set('emailAddress', contactData.email);
                        }
                        if (contactData.phone) {
                          params.set('phone_number', contactData.phone);
                          params.set('phoneNumber', contactData.phone);
                          params.set('mobile', contactData.phone);
                        }
                        
                        // Get the base URL and add parameters
                        const baseUrl = 'https://api.leadconnectorhq.com/widget/booking/PcUyCv42lP91GzQuqkgU';
                        const prefilledUrl = `${baseUrl}?${params.toString()}`;
                        
                        console.log('Pre-filling calendar with URL:', prefilledUrl);
                        
                        // Update iframe src with pre-filled data
                        iframe.src = prefilledUrl;
                        
                        // Set up listener for booking completion
                        window.addEventListener('message', function(event) {
                          if (event.origin === 'https://api.leadconnectorhq.com' || 
                              event.origin === 'https://link.msgsndr.com') {
                            
                            console.log('Received message from calendar:', event.data);
                            
                            // Check for booking completion
                            if (event.data && typeof event.data === 'object') {
                              if (event.data.type === 'booking_completed' || 
                                  event.data.event === 'booking_completed' ||
                                  event.data.action === 'booked' ||
                                  (event.data.data && event.data.data.booked)) {
                                
                                console.log('Booking completed, clearing sticky contact data');
                                clearStickyContact();
                              }
                            }
                          }
                        });
                        
                        // Alternative: Clear data after successful page navigation
                        // (in case the booking redirects to a thank you page)
                        setTimeout(function() {
                          try {
                            if (iframe.contentWindow && iframe.contentWindow.location.href.includes('thank')) {
                              console.log('Thank you page detected, clearing sticky contact data');
                              clearStickyContact();
                            }
                          } catch (e) {
                            // Cross-origin restrictions, this is expected
                          }
                        }, 5000);
                        
                      } else {
                        console.log('Calendar iframe not found');
                      }
                    } else {
                      console.log('No sticky contact data found');
                    }
                  }
                  
                  // Performance measurement and loading state management
                  const iframe = document.getElementById('PcUyCv42lP91GzQuqkgU_1757868011597');
                  const skeleton = document.getElementById('calendar-loading-skeleton');
                  
                  if (iframe && skeleton) {
                    const startTime = performance.now();
                    let loadTimeout;
                    
                    // Function to hide skeleton and show iframe
                    function showCalendar() {
                      const loadTime = performance.now() - startTime;
                      console.log(`Calendar loaded in ${Math.round(loadTime)}ms`);
                      
                      // Smooth transition
                      iframe.style.opacity = '1';
                      skeleton.style.opacity = '0';
                      
                      setTimeout(() => {
                        skeleton.style.display = 'none';
                      }, 300);
                      
                      // Clear timeout
                      if (loadTimeout) {
                        clearTimeout(loadTimeout);
                      }
                    }
                    
                    // Function to handle loading failure
                    function handleLoadingFailure() {
                      console.warn('Calendar loading timeout or error');
                      
                      // Show error state in skeleton
                      skeleton.innerHTML = `
                        <div class="flex items-center justify-center h-full">
                          <div class="text-center p-8">
                            <div class="text-gray-400 mb-4">
                              <svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                              </svg>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-700 mb-2">Calendar Taking Longer Than Expected</h3>
                            <p class="text-gray-500 mb-4">The booking calendar is loading slowly. You can:</p>
                            <div class="space-y-2">
                              <button onclick="location.reload()" class="block w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                                Refresh Page
                              </button>
                              <a href="https://api.leadconnectorhq.com/widget/booking/PcUyCv42lP91GzQuqkgU" target="_blank" class="block w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors">
                                Open Calendar in New Tab
                              </a>
                            </div>
                          </div>
                        </div>
                      `;
                    }
                    
                    // Set loading timeout (15 seconds)
                    loadTimeout = setTimeout(handleLoadingFailure, 15000);
                    
                    // Listen for iframe load
                    iframe.addEventListener('load', showCalendar);
                    
                    // Also listen for error
                    iframe.addEventListener('error', handleLoadingFailure);
                    
                    // Network-aware loading optimization
                    if (navigator.connection) {
                      const connection = navigator.connection;
                      console.log(`Network: ${connection.effectiveType}, Downlink: ${connection.downlink}Mbps`);
                      
                      // Adjust timeout based on connection speed
                      if (connection.effectiveType === 'slow-2g' || connection.effectiveType === '2g') {
                        clearTimeout(loadTimeout);
                        loadTimeout = setTimeout(handleLoadingFailure, 30000); // 30s for slow connections
                        
                        // Update loading message
                        const loadingText = skeleton.querySelector('span');
                        if (loadingText) {
                          loadingText.textContent = 'Loading calendar (slow connection detected)...';
                        }
                      }
                    }
                  }
                  
                  // Wait a moment for iframe to be ready, then pre-fill
                  setTimeout(prefillCalendar, 1000);
                  
                  // Also try pre-filling when iframe loads
                  if (iframe) {
                    iframe.addEventListener('load', prefillCalendar);
                  }
                });
              </script>
              
              <!-- Custom CSS to remove iframe padding -->
      <style>
                #PcUyCv42lP91GzQuqkgU_1757868011597 {
                  margin: 0 !important;
                  padding: 0 !important;
                  border: none !important;
                  background: transparent !important;
                }
                
                /* Try to target the iframe content */
                iframe[id*="PcUyCv42lP91GzQuqkgU"] {
                  margin: 0 !important;
                  padding: 0 !important;
                  border: none !important;
                  display: block !important;
        }
      </style>
              </div>
    
    
                </div>
        </section>

        <script>
          // Initialize countdown timer for calendar page
          document.addEventListener('DOMContentLoaded', function() {
            // Set countdown to October 9th, 2025 at 11:59 PM
            const targetDate = new Date('2025-10-09T23:59:59').getTime();

            function updateCalendarCountdown() {
              const now = new Date().getTime();
              const timeLeft = targetDate - now;

              if (timeLeft > 0) {
                const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

                let formattedTime;
                if (days > 0) {
                  formattedTime = `${days}d ${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                } else {
                  formattedTime = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                }

                // Update calendar countdown timer
                const timerElement = document.getElementById('calendar-countdown-timer');
                if (timerElement) {
                  timerElement.textContent = formattedTime;
                }
              } else {
                // Timer expired, show "EXPIRED"
                const timerElement = document.getElementById('calendar-countdown-timer');
                if (timerElement) {
                  timerElement.textContent = 'EXPIRED';
                }
              }
            }

            // Update immediately and then every second
            updateCalendarCountdown();
            setInterval(updateCalendarCountdown, 1000);
          });
        </script>
        
        <!-- Spacing between blue background and next section -->
        <div class="h-16 sm:h-20 lg:h-24"></div>
